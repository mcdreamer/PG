cmake_minimum_required(VERSION 3.0)
project(stockpile_resources)

function(build_pile STOCKPILEPATH PILEDEFINITION PILEROOT PILEOUTPUT)

add_custom_target(build_stockpile_resources ALL)

add_custom_command(
  TARGET build_stockpile_resources
  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}${PILEDEFINITION}
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
  COMMAND ${STOCKPILEPATH} -i ${CMAKE_CURRENT_BINARY_DIR}/${PILEDEFINITION} -r${CMAKE_CURRENT_BINARY_DIR}/${PILEROOT} -o ${PILEOUTPUT}
)

endfunction()
